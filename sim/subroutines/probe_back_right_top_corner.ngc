(author: Chris P)
(version: 0.1)
(date: 04/23/19)

(Probe back right top corner for x,y,z 0,0,0 position)
(Start probe position is over back right corner of stock)
(inside the step off width square and within max z distance)
(ensure all settings have been set properly according to help diagrams)

o<probe_back_right_top_corner> sub

  (uses NGCGUI style arg spec)
  (number after "=" in comment is default value)
  #<probe_tool_number> = #1    (=99)
  #<max_z_distance> = #2       (=0.5000)
  #<max_xy_distance> = #3      (=0.5000)
  #<xy_clearance> = #4         (=0.1000)
  #<z_clearance> = #5          (=0.1000)
  #<step_off_width> = #6       (=0.5000)
  #<extra_probe_depth> = #7    (=0.0000)
  #<probe_slow_fr> = #8        (=0.0)
  #<probe_fast_fr> = #9        (=10.0)
  #<calibration_offset> = #10  (=0.0000)
  #<x_hint> = #11              (=1.0000)
  #<y_hint> = #12              (=1.0000)
  #<diameter_hint> = #13       (=1.0000)
  #<edge_width> = #14          (=0.5000)

  (Cancel G92 offsets)
  G92.1

  (Probe Tool Safety Check)
  o<110> if [#5400 NE #<probe_tool_number>]
  (MSG, Specified probe tool #<probe_tool_number> not in spindle, aborting)
   o<probe_back_right_top_corner> return
  o<110> endif

  (Probe Diameter)
  #<probe_diameter> = #5410

  (Call sub "probe_z_minus_wco" to Probe top of Workpiece)
  o<probe_z_minus_sub> call [#1][#2][#3][#4][#5][#6][#7][#8][#9][#10][#11][#12][#13][#14]

  (Probe X Positioning Move, Step Off Width)
  G91
  G0 X[#<step_off_width>]

  (Probe X Positioning Move, to Probing Depth)
  F[#<probe_fast_fr>]
  G1 Z-[#<z_clearance> + #<probe_diameter> + #<extra_probe_depth>]

  (Call sub "probe_x_minus_sub" to Probe x- side of Workpiece)
  o<probe_x_minus_sub> call [#1][#2][#3][#4][#5][#6][#7][#8][#9][#10][#11][#12][#13][#14]

  (Probe Y Positioning Move, up to Z clearance plane)
  G91
  G0 Z[#<z_clearance> + #<probe_diameter> + #<extra_probe_depth>]

  (Probe Y Positioning Move, Traverse Workpiece Top at Z Clearance Height plane)
  G0 X-[#<step_off_width>] Y[#<step_off_width>]

  (Probe Y Positioning Move,to Probing Depth)
  F[#<probe_fast_fr>]
  G1 Z-[#<z_clearance> + #<probe_diameter> + #<extra_probe_depth>]

  (Call sub "probe_y_minus_sub" to Probe y- side of Workpiece)
  o<probe_y_minus_sub> call [#1][#2][#3][#4][#5][#6][#7][#8][#9][#10][#11][#12][#13][#14]

  (Probe Completion Move to Z Clearance Plane, and X Zero, Y Zero)
  G90
  G0 Z[#<z_clearance>]
  G0 X0.0000 Y0.0000

o<probe_back_right_top_corner> endsub

M2 (end program)
